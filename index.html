<html>
<!-- intial framework for brush scroll from: https://bl.ocks.org/mbostock/34f08d5e11952a80609169b7917d4172 -->
<head>
    <title>European Humanities</title>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <style>
        h1{
            color: #4d4d4d;
            
        }
        body {
            font-family: sans-serif;
            padding: 20px;
        }

        circle:hover {
            stroke: black;
            stroke-width: 2px;
            opacity: 0.5;
        }

        .tooltip {
            position: absolute;
            width: auto;
            height: 95px;
            padding: 5px;
            pointer-events: none;
            background-color: white;
            font-weight: bold;
            text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.2);
            -webkit-box-shadow: 2px 2px 3px 0px #ccc;
            /* Safari 3-4, iOS 4.0.2 - 4.2, Android 2.3+ */
            -moz-box-shadow: 2px 2px 3px 0px #ccc;
            /* Firefox 3.5 - 3.6 */
            box-shadow: 2px 2px 3px 0px #ccc;
            /* Opera 10.5, IE 9, Firefox 4+, Chrome 6+, iOS 5 */
            opacity: 0.80;
        }
    </style>
</head>

<body>
    <h1>European History: Contributions in the Arts & Humanities</h1>

    <script>
        //set Scales and paths
        var x = d3.scaleLinear().range([0, 1350]),
            x2 = d3.scaleLinear().range([0, 1350]),
            y = d3.scaleLinear().range([650, 5]),
            y2 = d3.scaleLinear().range([160, 100]);

        var xAxis = d3.axisBottom(x).tickFormat(d3.format("d")),
            xAxis2 = d3.axisBottom(x2).tickFormat(d3.format("d")).ticks(20),
            yAxis = d3.axisLeft(y),
            yAxis2 = d3.axisLeft(y2);

        var brush = d3.brushX()
            .extent([[0, 90], [1350, 160]])
            .on("brush", select);

        var svg = d3.select("body").append("svg")
            .attr("width", 1800)
            .attr("height", 800);

        svg.append("defs").append("clipPath")
            .attr("id", "clip")
            .append("rect")
            .attr("width", 1355)
            .attr("height", 800);

        var focus = svg.append("g")
            .attr("class", "focus")
            .attr("transform", "translate(" + 50 + "," + 0 + ")");

        var context = svg.append("g")
            .attr("class", "context")
            .attr("transform", "translate(" + 50 + "," + 610 + ")");

        //Tooltip
        var tooltip = d3.select("body").append("div")
            .attr("class", "tooltip")
            .style("opacity", 0);

        //primary scatter plot    
        d3.tsv("HumanitiesEurope.tsv", function (error, data) {
            //set scale domains
            x.domain([-700, 1950]);
            y.domain([0, 100]);
            x2.domain(x.domain());
            y2.domain(y.domain());

            //add era paths
            var archaicGreece = focus.append("path")
                .attr("clip-path", "url(#clip)")
                .style("opacity", .1)
                .attr('id', 'archaicGreece');

            var archaicGreeceText1 = focus.append("text")
                .attr("clip-path", "url(#clip)")
                .attr('id', 'archaicGreeceText1')
                .text("Archaic")
                .attr("font-family", "sans-serif")
                .attr("font-size", "18px")
                .attr("fill", "#81a1ca");

            var archaicGreeceText2 = focus.append("text")
                .attr("clip-path", "url(#clip)")
                .attr('id', 'archaicGreeceText2')
                .text("Greece")
                .attr("font-family", "sans-serif")
                .attr("font-size", "18px")
                .attr("fill", "#81a1ca");

            var classicalAntiquity = focus.append("path")
                .attr("clip-path", "url(#clip)")
                .style("opacity", .05)
                .attr('id', 'classicalAntiquity');

            var classicalAntiquityText = focus.append("text")
                .attr("clip-path", "url(#clip)")
                .attr('id', 'classicalAntiquityText')
                .text("Classical Antiquity")
                .attr("font-family", "sans-serif")
                .attr("font-size", "18px")
                .attr("fill", "#81a1ca");

            var darkAges = focus.append("path")
                .attr("clip-path", "url(#clip)")
                .style("opacity", .1)
                .attr('id', 'darkAges');

            var darkAgesText = focus.append("text")
                .attr("clip-path", "url(#clip)")
                .attr('id', 'darkAgesText')
                .text("Dark Ages")
                .attr("font-family", "sans-serif")
                .attr("font-size", "18px")
                .attr("fill", "#81a1ca");

            var highMiddleAges = focus.append("path")
                .attr("clip-path", "url(#clip)")
                .style("opacity", .05)
                .attr('id', 'highMiddleAges');

            var highMiddleAgesText1 = focus.append("text")
                .attr("clip-path", "url(#clip)")
                .attr('id', 'highMiddleAgesText1')
                .text("High Middle")
                .attr("font-family", "sans-serif")
                .attr("font-size", "18px")
                .attr("fill", "#81a1ca");

            var highMiddleAgesText2 = focus.append("text")
                .attr("clip-path", "url(#clip)")
                .attr('id', 'highMiddleAgesText2')
                .text("Ages")
                .attr("font-family", "sans-serif")
                .attr("font-size", "18px")
                .attr("fill", "#81a1ca");

            var renaissance = focus.append("path")
                .attr("clip-path", "url(#clip)")
                .style("opacity", .1)
                .attr('id', 'renaissance');

            var renaissanceText = focus.append("text")
                .attr("clip-path", "url(#clip)")
                .attr('id', 'renaissanceText')
                .text("Renaissance")
                .attr("font-family", "sans-serif")
                .attr("font-size", "18px")
                .attr("fill", "#81a1ca");

            var ageOfDiscovery = focus.append("path")
                .attr("clip-path", "url(#clip)")
                .style("opacity", .05)
                .attr('id', 'ageOfDiscovery');

            var discoveryText1 = focus.append("text")
                .attr("clip-path", "url(#clip)")
                .attr('id', 'discoveryText1')
                .text("Age of")
                .attr("font-family", "sans-serif")
                .attr("font-size", "18px")
                .attr("fill", "#81a1ca");

            var discoveryText2 = focus.append("text")
                .attr("clip-path", "url(#clip)")
                .attr('id', 'discoveryText2')
                .text("Discovery")
                .attr("font-family", "sans-serif")
                .attr("font-size", "18px")
                .attr("fill", "#81a1ca");

            var industrialRevolution = focus.append("path")
                .attr("clip-path", "url(#clip)")
                .style("opacity", .1)
                .attr('id', 'industrialRevolution');

            var industrialText1 = focus.append("text")
                .attr("clip-path", "url(#clip)")
                .attr('id', 'industrialText1')
                .text("Indust")
                .attr("font-family", "sans-serif")
                .attr("font-size", "18px")
                .attr("fill", "#81a1ca");

            var industrialText2 = focus.append("text")
                .attr("clip-path", "url(#clip)")
                .attr('id', 'industrialText2')
                .text("Rev")
                .attr("font-family", "sans-serif")
                .attr("font-size", "18px")
                .attr("fill", "#81a1ca");

            var modernEra = focus.append("path")
                .attr("clip-path", "url(#clip)")
                .style("opacity", .05)
                .attr('id', 'modernEra');

            var modernText1 = focus.append("text")
                .attr("clip-path", "url(#clip)")
                .attr('id', 'modernText1')
                .text("Mod")
                .attr("font-family", "sans-serif")
                .attr("font-size", "18px")
                .attr("fill", "#81a1ca");

            var modernText2 = focus.append("text")
                .attr("clip-path", "url(#clip)")
                .attr('id', 'modernText2')
                .text("ern")
                .attr("font-family", "sans-serif")
                .attr("font-size", "18px")
                .attr("fill", "#81a1ca");



            // add figures to main chart
            var dots = focus.append("g");
            dots.attr("clip-path", "url(#clip)");
            dots.selectAll("dot")
                .data(data)
                .enter().append("circle")
                .attr('class', 'dot')
                .attr("r", 5)
                .style("opacity", .5)
                .style("fill", function (d) {
                    if (d.Inventory == "Literature") {
                        return 'Blue';
                    }
                    else if (d.Inventory == "Philosophy") {
                        return 'Red';
                    }
                    else if (d.Inventory == "Art") {
                        return 'Green';
                    }
                    else if (d.Inventory == "Music") {
                        return 'Orange';
                    }
                })
                .attr("cx", function (d) { return x(d.Fl); })
                .attr("cy", function (d) { return y(d.Index); })
                .on("mouseover", function (d) {
                    //try tooltip
                    tooltip.transition()
                        .duration(200)
                        .style("opacity", .85);
                    tooltip.html("Name: " + d.Name + "<br/>" +
                        "Country: " + d.BirthCountry + "<br/>" +
                        "Field: " + d.Inventory + "<br/>" +
                        "Significance Rating: " + d.Index + "<br/>" +
                        "Floruit: " + d.Fl
                    )
                        .style("left", (d3.event.pageX + 10) + "px")
                        .style("top", function () {
                            if (d.Index >= 85) {
                                return (d3.event.pageY + 5) + "px";
                            } else {
                                return (d3.event.pageY - 115) + "px";
                            }
                        })
                        .style("color", function () {
                            if (d.Inventory == "Literature") {
                                return 'Blue';
                            }
                            else if (d.Inventory == "Philosophy") {
                                return 'Red';
                            }
                            else if (d.Inventory == "Art") {
                                return 'Green';
                            }
                            else if (d.Inventory == "Music") {
                                return 'Orange';
                            }
                        });
                })
                .on("mouseout", function (d) {
                    tooltip.transition()
                        .duration(400)
                        .style("opacity", 0);
                });



            focus.append("g")
                .attr("class", "xAxis")
                .attr("transform", "translate(0," + 650 + ")")
                .call(xAxis);

            focus.append("g")
                .attr("class", "yAxis")
                .call(yAxis);

            focus.append("text")
                .attr("transform", "rotate(-90)")
                .attr("y", -50)
                .attr("x", -330)
                .attr("dy", "1em")
                .attr("font-family", "sans-serif")
                .style("text-anchor", "middle")
                .text("Significance");

            focus.append("text")
                .attr("transform", "rotate(90)")
                .attr("x", 736)
                .attr("y", -1360)
                .attr("font-family", "sans-serif")
                .attr("font-size", 10)
                .style("text-anchor", "middle")
                .text("Figures Count");

            for (i = 1; i < 11; i++) {
                focus.append("line")
                    .attr("x1", x(-701))
                    .attr("y1", y(i * 10))
                    .attr("x2", x(1950))
                    .attr("y2", y(i * 10))
                    .style("opacity", 0.3)
                    .style("stroke", "gray");
            }

            svg.append("text")
                .attr("transform",
                    "translate(725,690)")
                .style("text-anchor", "middle")
                .attr("font-family", "sans-serif")
                .text("Year");

            // color legend key

            svg.append("rect")
                .attr("x", 1430)
                .attr("y", 5)
                .attr("width", 220)
                .attr("height", 286)
                .attr("fill", "white")
                .attr("stroke", "lightsteelblue");

            svg.append("text")
                .attr("x", 1540)
                .attr("y", 50)
                .attr("text-anchor", "middle")
                .attr("font-size", 20)
                .attr("fill", "#4d4d4d")
                .text("Field of Study");

            svg.append("rect")
                .attr("x", 1470)
                .attr("y", 80)
                .attr("width", 30)
                .attr("height", 30)
                .attr("fill", "red")
                .attr("opacity", 0.7);

            svg.append("text")
                .attr("x", 1520)
                .attr("y", 100)
                .attr("font-size", 16)
                .attr("fill", "red")
                .attr("opacity", 0.7)
                .text("Philosophy");

            svg.append("rect")
                .attr("x", 1470)
                .attr("y", 130)
                .attr("width", 30)
                .attr("height", 30)
                .attr("fill", "blue")
                .attr("opacity", 0.7);

            svg.append("text")
                .attr("x", 1520)
                .attr("y", 150)
                .attr("font-size", 16)
                .attr("fill", "blue")
                .attr("opacity", 0.7)
                .text("Literature");

            svg.append("rect")
                .attr("x", 1470)
                .attr("y", 180)
                .attr("width", 30)
                .attr("height", 30)
                .attr("fill", "green")
                .attr("opacity", 0.7);

            svg.append("text")
                .attr("x", 1520)
                .attr("y", 200)
                .attr("font-size", 16)
                .attr("fill", "green")
                .attr("opacity", 0.7)
                .text("Art");

            svg.append("rect")
                .attr("x", 1470)
                .attr("y", 230)
                .attr("width", 30)
                .attr("height", 30)
                .attr("fill", "orange")
                .attr("opacity", 0.7);

            svg.append("text")
                .attr("x", 1520)
                .attr("y", 250)
                .attr("font-size", 16)
                .attr("fill", "orange")
                .attr("opacity", 0.7)
                .text("Music");

            // filter box

            svg.append("rect")
                .attr("x", 1430)
                .attr("y", 320)
                .attr("width", 220)
                .attr("height", 340)
                .attr("fill", "white")
                .attr("stroke", "lightsteelblue");

            svg.append("rect")
                .attr("x", 1470)
                .attr("y", 395)
                .attr("class", "filterrect")
                .attr("width", 30)
                .attr("height", 30)
                .attr("stroke", "red")
                .attr("stroke-width", "3px")
                .attr("fill", "white")
                .attr("opacity", 0.7)
                .on("click", function () {
                    if (showPhil && showLit && showArt && showMusic) {
                        showLit = false;
                        showArt = false;
                        showMusic = false;
                    }
                    if (d3.select(this).attr("fill") == "white") {
                        showPhil = true;
                    } else {
                        showPhil = false;
                        d3.select(this).attr("fill", "white");
                    };
                    focus.selectAll(".dot")
                        .remove();
                    if (showPhil) {
                        svg.selectAll(".filterrect")
                            .attr("fill", "white");
                        d3.select(this).attr("fill", "red");
                        focus.selectAll(".dot")
                            .data(data)
                            .enter().append("circle")
                            .attr("clip-path", "url(#clip)")
                            .attr('class', 'dot')
                            .filter(function (d) {
                                return d.Inventory == 'Philosophy';
                            })
                            .attr("r", 5)
                            .style("opacity", .5)
                            .style("fill", function (d) {
                                if (d.Inventory == "Literature") {
                                    return 'Blue';
                                }
                                else if (d.Inventory == "Philosophy") {
                                    return 'Red';
                                }
                                else if (d.Inventory == "Art") {
                                    return 'Green';
                                }
                                else if (d.Inventory == "Music") {
                                    return 'Orange';
                                }
                            })
                            .attr("cx", function (d) { return x(d.Fl); })
                            .attr("cy", function (d) { return y(d.Index); })
                            .on("mouseover", function (d) {
                                //try tooltip
                                tooltip.transition()
                                    .duration(200)
                                    .style("opacity", .85);
                                tooltip.html("Name: " + d.Name + "<br/>" +
                                    "Country: " + d.BirthCountry + "<br/>" +
                                    "Field: " + d.Inventory + "<br/>" +
                                    "Significance Rating: " + d.Index + "<br/>" +
                                    "Floruit: " + d.Fl
                                )
                                    .style("left", (d3.event.pageX + 10) + "px")
                                    .style("top", function () {
                                        if (d.Index >= 85) {
                                            return (d3.event.pageY + 5) + "px";
                                        } else {
                                            return (d3.event.pageY - 115) + "px";
                                        }
                                    })
                                    .style("color", function () {
                                        if (d.Inventory == "Literature") {
                                            return 'Blue';
                                        }
                                        else if (d.Inventory == "Philosophy") {
                                            return 'Red';
                                        }
                                        else if (d.Inventory == "Art") {
                                            return 'Green';
                                        }
                                        else if (d.Inventory == "Music") {
                                            return 'Orange';
                                        }
                                    });
                            })
                            .on("mouseout", function (d) {
                                tooltip.transition()
                                    .duration(400)
                                    .style("opacity", 0);
                            });
                    }
                });

            svg.append("text")
                .attr("x", 1520)
                .attr("y", 415)
                .attr("font-size", 16)
                .attr("fill", "red")
                .attr("opacity", 0.7)
                .text("Philosophy");

            svg.append("rect")
                .attr("x", 1470)
                .attr("y", 445)
                .attr("width", 30)
                .attr("height", 30)
                .attr("class", "filterrect")
                .attr("stroke", "blue")
                .attr("stroke-width", "3px")
                .attr("fill", "white")
                .attr("opacity", 0.7)
                .on("click", function () {
                    if (showPhil && showLit && showArt && showMusic) {
                        showPhil = false;
                        showArt = false;
                        showMusic = false;
                    }
                    if (d3.select(this).attr("fill") == "white") {
                        showLit = true;
                    } else {
                        showLit = false;
                        d3.select(this).attr("fill", "white");
                    };
                    focus.selectAll(".dot")
                        .remove();
                    if (showLit) {
                        svg.selectAll(".filterrect")
                            .attr("fill", "white");
                        d3.select(this).attr("fill", "blue");
                        focus.selectAll(".dot")
                            .data(data)
                            .enter().append("circle")
                            .attr("clip-path", "url(#clip)")
                            .attr('class', 'dot')
                            .filter(function (d) {
                                return d.Inventory == 'Literature';
                            })
                            .attr("r", 5)
                            .style("opacity", .5)
                            .style("fill", function (d) {
                                if (d.Inventory == "Literature") {
                                    return 'Blue';
                                }
                                else if (d.Inventory == "Philosophy") {
                                    return 'Red';
                                }
                                else if (d.Inventory == "Art") {
                                    return 'Green';
                                }
                                else if (d.Inventory == "Music") {
                                    return 'Orange';
                                }
                            })
                            .attr("cx", function (d) { return x(d.Fl); })
                            .attr("cy", function (d) { return y(d.Index); })
                            .on("mouseover", function (d) {
                                //try tooltip
                                tooltip.transition()
                                    .duration(200)
                                    .style("opacity", .85);
                                tooltip.html("Name: " + d.Name + "<br/>" +
                                    "Country: " + d.BirthCountry + "<br/>" +
                                    "Field: " + d.Inventory + "<br/>" +
                                    "Significance Rating: " + d.Index + "<br/>" +
                                    "Floruit: " + d.Fl
                                )
                                    .style("left", (d3.event.pageX + 10) + "px")
                                    .style("top", function () {
                                        if (d.Index >= 85) {
                                            return (d3.event.pageY + 5) + "px";
                                        } else {
                                            return (d3.event.pageY - 115) + "px";
                                        }
                                    })
                                    .style("color", function () {
                                        if (d.Inventory == "Literature") {
                                            return 'Blue';
                                        }
                                        else if (d.Inventory == "Philosophy") {
                                            return 'Red';
                                        }
                                        else if (d.Inventory == "Art") {
                                            return 'Green';
                                        }
                                        else if (d.Inventory == "Music") {
                                            return 'Orange';
                                        }
                                    });
                            })
                            .on("mouseout", function (d) {
                                tooltip.transition()
                                    .duration(400)
                                    .style("opacity", 0);
                            });
                    }
                });

            svg.append("text")
                .attr("x", 1520)
                .attr("y", 465)
                .attr("font-size", 16)
                .attr("fill", "blue")
                .attr("opacity", 0.7)
                .text("Literature");

            svg.append("rect")
                .attr("x", 1470)
                .attr("y", 495)
                .attr("width", 30)
                .attr("height", 30)
                .attr("class", "filterrect")
                .attr("stroke", "green")
                .attr("stroke-width", "3px")
                .attr("fill", "white")
                .attr("opacity", 0.7)
                .on("click", function () {
                    if (showPhil && showLit && showArt && showMusic) {
                        showLit = false;
                        ShowPhil = false;
                        showMusic = false;
                    }
                    if (d3.select(this).attr("fill") == "white") {
                        showArt = true;
                    } else {
                        showArt = false;
                        d3.select(this).attr("fill", "white");
                    };
                    focus.selectAll(".dot")
                        .remove();
                    if (showArt) {
                        svg.selectAll(".filterrect")
                            .attr("fill", "white");
                        d3.select(this).attr("fill", "green");
                        focus.selectAll(".dot")
                            .data(data)
                            .enter().append("circle")
                            .attr("clip-path", "url(#clip)")
                            .attr('class', 'dot')
                            .filter(function (d) {
                                return d.Inventory == 'Art';
                            })
                            .attr("r", 5)
                            .style("opacity", .5)
                            .style("fill", function (d) {
                                if (d.Inventory == "Literature") {
                                    return 'Blue';
                                }
                                else if (d.Inventory == "Philosophy") {
                                    return 'Red';
                                }
                                else if (d.Inventory == "Art") {
                                    return 'Green';
                                }
                                else if (d.Inventory == "Music") {
                                    return 'Orange';
                                }
                            })
                            .attr("cx", function (d) { return x(d.Fl); })
                            .attr("cy", function (d) { return y(d.Index); })
                            .on("mouseover", function (d) {
                                //try tooltip
                                tooltip.transition()
                                    .duration(200)
                                    .style("opacity", .85);
                                tooltip.html("Name: " + d.Name + "<br/>" +
                                    "Country: " + d.BirthCountry + "<br/>" +
                                    "Field: " + d.Inventory + "<br/>" +
                                    "Significance Rating: " + d.Index + "<br/>" +
                                    "Floruit: " + d.Fl
                                )
                                    .style("left", (d3.event.pageX + 10) + "px")
                                    .style("top", function () {
                                        if (d.Index >= 85) {
                                            return (d3.event.pageY + 5) + "px";
                                        } else {
                                            return (d3.event.pageY - 115) + "px";
                                        }
                                    })
                                    .style("color", function () {
                                        if (d.Inventory == "Literature") {
                                            return 'Blue';
                                        }
                                        else if (d.Inventory == "Philosophy") {
                                            return 'Red';
                                        }
                                        else if (d.Inventory == "Art") {
                                            return 'Green';
                                        }
                                        else if (d.Inventory == "Music") {
                                            return 'Orange';
                                        }
                                    });
                            })
                            .on("mouseout", function (d) {
                                tooltip.transition()
                                    .duration(400)
                                    .style("opacity", 0);
                            });
                    }
                });

            svg.append("text")
                .attr("x", 1520)
                .attr("y", 515)
                .attr("font-size", 16)
                .attr("fill", "green")
                .attr("opacity", 0.7)
                .text("Art");

            svg.append("rect")
                .attr("x", 1470)
                .attr("y", 545)
                .attr("width", 30)
                .attr("height", 30)
                .attr("class", "filterrect")
                .attr("stroke", "orange")
                .attr("stroke-width", "3px")
                .attr("fill", "white")
                .attr("opacity", 0.7)
                .on("click", function () {
                    if (showPhil && showLit && showArt && showMusic) {
                        showLit = false;
                        showArt = false;
                        showPhil = false;
                    }
                    if (d3.select(this).attr("fill") == "white") {
                        showMusic = true;
                    } else {
                        showMusic = false;
                        d3.select(this).attr("fill", "white");
                    };
                    focus.selectAll(".dot")
                        .remove();
                    if (showMusic) {
                        svg.selectAll(".filterrect")
                            .attr("fill", "white");
                        d3.select(this).attr("fill", "orange");
                        focus.selectAll(".dot")
                            .data(data)
                            .enter().append("circle")
                            .attr("clip-path", "url(#clip)")
                            .attr('class', 'dot')
                            .filter(function (d) {
                                return d.Inventory == 'Music';
                            })
                            .attr("r", 5)
                            .style("opacity", .5)
                            .style("fill", function (d) {
                                if (d.Inventory == "Literature") {
                                    return 'Blue';
                                }
                                else if (d.Inventory == "Philosophy") {
                                    return 'Red';
                                }
                                else if (d.Inventory == "Art") {
                                    return 'Green';
                                }
                                else if (d.Inventory == "Music") {
                                    return 'Orange';
                                }
                            })
                            .attr("cx", function (d) { return x(d.Fl); })
                            .attr("cy", function (d) { return y(d.Index); })
                            .on("mouseover", function (d) {
                                //try tooltip
                                tooltip.transition()
                                    .duration(200)
                                    .style("opacity", .85);
                                tooltip.html("Name: " + d.Name + "<br/>" +
                                    "Country: " + d.BirthCountry + "<br/>" +
                                    "Field: " + d.Inventory + "<br/>" +
                                    "Significance Rating: " + d.Index + "<br/>" +
                                    "Floruit: " + d.Fl
                                )
                                    .style("left", (d3.event.pageX + 10) + "px")
                                    .style("top", function () {
                                        if (d.Index >= 85) {
                                            return (d3.event.pageY + 5) + "px";
                                        } else {
                                            return (d3.event.pageY - 115) + "px";
                                        }
                                    })
                                    .style("color", function () {
                                        if (d.Inventory == "Literature") {
                                            return 'Blue';
                                        }
                                        else if (d.Inventory == "Philosophy") {
                                            return 'Red';
                                        }
                                        else if (d.Inventory == "Art") {
                                            return 'Green';
                                        }
                                        else if (d.Inventory == "Music") {
                                            return 'Orange';
                                        }
                                    });
                            })
                            .on("mouseout", function (d) {
                                tooltip.transition()
                                    .duration(400)
                                    .style("opacity", 0);
                            });
                    }
                });

            svg.append("text")
                .attr("x", 1520)
                .attr("y", 565)
                .attr("font-size", 16)
                .attr("fill", "orange")
                .attr("opacity", 0.7)
                .text("Music");

            // showall
            svg.append("rect")
                .attr("x", 1470)
                .attr("y", 595)
                .attr("width", 15)
                .attr("height", 15)
                .attr("class", "showAll")
                .attr("stroke", "red")
                .attr("stroke-width", "0px")
                .attr("fill", "red")
                .attr("opacity", 0.7);
            svg.append("rect")
                .attr("x", 1470)
                .attr("y", 610)
                .attr("width", 15)
                .attr("height", 15)
                .attr("class", "showAll")
                .attr("stroke", "blue")
                .attr("stroke-width", "0px")
                .attr("fill", "blue")
                .attr("opacity", 0.7);
            svg.append("rect")
                .attr("x", 1485)
                .attr("y", 595)
                .attr("width", 15)
                .attr("height", 15)
                .attr("class", "showAll")
                .attr("stroke", "green")
                .attr("stroke-width", "0px")
                .attr("fill", "green")
                .attr("opacity", 0.7);
            svg.append("rect")
                .attr("x", 1485)
                .attr("y", 610)
                .attr("width", 15)
                .attr("height", 15)
                .attr("class", "showAll")
                .attr("stroke", "orange")
                .attr("stroke-width", "0px")
                .attr("fill", "orange")
                .attr("opacity", 0.7);

            svg.append("text")
                .attr("x", 1520)
                .attr("y", 615)
                .attr("font-size", 16)
                .attr("fill", "brown")
                .attr("opacity", 0.7)
                .text("Show All");

            svg.append("text")
                .attr("x", 1540)
                .attr("y", 365)
                .attr("text-anchor", "middle")
                .attr("fill", "#4d4d4d")
                .attr("font-size", 20)
                .text("Filter by Field");

            svg.selectAll(".showAll")
                .on("click", function () {
                    focus.selectAll(".dot").remove();
                    svg.selectAll(".filterrect").attr("fill", "white");
                    focus.selectAll(".dot")
                        .data(data)
                        .enter().append("circle")
                        .attr("clip-path", "url(#clip)")
                        .attr('class', 'dot')
                        .attr("r", 5)
                        .style("opacity", .5)
                        .style("fill", function (d) {
                            if (d.Inventory == "Literature") {
                                return 'Blue';
                            }
                            else if (d.Inventory == "Philosophy") {
                                return 'Red';
                            }
                            else if (d.Inventory == "Art") {
                                return 'Green';
                            }
                            else if (d.Inventory == "Music") {
                                return 'Orange';
                            }
                        })
                        .attr("cx", function (d) { return x(d.Fl); })
                        .attr("cy", function (d) { return y(d.Index); })
                        .on("mouseover", function (d) {
                            //try tooltip
                            tooltip.transition()
                                .duration(200)
                                .style("opacity", .85);
                            tooltip.html("Name: " + d.Name + "<br/>" +
                                "Country: " + d.BirthCountry + "<br/>" +
                                "Field: " + d.Inventory + "<br/>" +
                                "Significance Rating: " + d.Index + "<br/>" +
                                "Floruit: " + d.Fl
                            )
                                .style("left", (d3.event.pageX + 10) + "px")
                                .style("top", function () {
                                    if (d.Index >= 85) {
                                        return (d3.event.pageY + 5) + "px";
                                    } else {
                                        return (d3.event.pageY - 115) + "px";
                                    }
                                })
                                .style("color", function () {
                                    if (d.Inventory == "Literature") {
                                        return 'Blue';
                                    }
                                    else if (d.Inventory == "Philosophy") {
                                        return 'Red';
                                    }
                                    else if (d.Inventory == "Art") {
                                        return 'Green';
                                    }
                                    else if (d.Inventory == "Music") {
                                        return 'Orange';
                                    }
                                });
                        })
                        .on("mouseout", function (d) {
                            tooltip.transition()
                                .duration(400)
                                .style("opacity", 0);
                        });
                });


            context.append("g")
                .attr("class", "xAxis")
                .attr("transform", "translate(0," + 160 + ")")
                .call(xAxis2);


            context.append("g")
                .attr("class", "brush")
                .attr("stroke", "#262626")
                .call(brush)
                .call(brush.move, x.range());
        });

        var showPhil = true;
        var showLit = true;
        var showArt = true;
        var showMusic = true;

        //area chart for brush
        d3.tsv("FigureCount.tsv", function (error, data) {
            if (error) throw error;
            x.domain([-700, 1950]);
            y.domain([0, 357]);
            x2.domain(x.domain());
            y2.domain(y.domain());

            var trendline = d3.line()
                .x(function (d) { return x(d.Year); })
                .y(function (d) { return y2(d.FigureCount); });

            var area = d3.area()
                .x(function (d) { return x(d.Year); })
                .y0(160)
                .y1(function (d) { return y2(d.FigureCount); });

            context.append("path")
                .datum(data)
                .attr("fill", "none")
                .attr("stroke", "steelblue")
                .attr("stroke-width", "2px")
                .attr("d", trendline);

            context.append("path")
                .datum(data)
                .attr("fill", "lightsteelblue")
                .attr("d", area);
        });

        //redraw everything on selection
        function select() {
            var selection = d3.event.selection;
            
            if(selection.map(x2.invert, x2)[1] - selection.map(x2.invert, x2)[0] <= 10){
                x.domain(savSelection.map(x2.invert, x2));
            }
            else{
                var savSelection = selection;
                x.domain(selection.map(x2.invert, x2));
            }
            
            //rescale eras
            focus.select("#archaicGreece")
                .attr("d", "M" + x(-700) + " " + y(100) +
                    "L" + x(-700) + " " + y(0) +
                    "L" + x(-480) + " " + y(0) +
                    "L" + x(-480) + " " + y(100));
            focus.select("#archaicGreeceText1")
                .attr("x", x(-590))
                .attr("y", 34)
                .attr("text-anchor", "middle");
            focus.select("#archaicGreeceText2")
                .attr("x", x(-590))
                .attr("y", 54)
                .attr("text-anchor", "middle");
            focus.select("#classicalAntiquity")
                .attr("d", "M" + x(-480) + " " + y(100) +
                    "L" + x(-480) + " " + y(0) +
                    "L" + x(476) + " " + y(0) +
                    "L" + x(476) + " " + y(100));
            focus.select("#classicalAntiquityText")
                .attr("x", x(-2))
                .attr("y", 44)
                .attr("text-anchor", "middle");
            focus.select("#darkAges")
                .attr("d", "M" + x(476) + " " + y(100) +
                    "L" + x(476) + " " + y(0) +
                    "L" + x(1066) + " " + y(0) +
                    "L" + x(1066) + " " + y(100));
            focus.select("#darkAgesText")
                .attr("x", x(771))
                .attr("y", 44)
                .attr("text-anchor", "middle");
            focus.select("#highMiddleAges")
                .attr("d", "M" + x(1066) + " " + y(100) +
                    "L" + x(1066) + " " + y(0) +
                    "L" + x(1300) + " " + y(0) +
                    "L" + x(1300) + " " + y(100));
            focus.select("#highMiddleAgesText1")
                .attr("x", x(1183))
                .attr("y", 34)
                .attr("text-anchor", "middle");
            focus.select("#highMiddleAgesText2")
                .attr("x", x(1183))
                .attr("y", 54)
                .attr("text-anchor", "middle");
            focus.select("#renaissance")
                .attr("d", "M" + x(1300) + " " + y(100) +
                    "L" + x(1300) + " " + y(0) +
                    "L" + x(1600) + " " + y(0) +
                    "L" + x(1600) + " " + y(100));
            focus.select("#renaissanceText")
                .attr("x", x(1450))
                .attr("y", 44)
                .attr("text-anchor", "middle");
            focus.select("#ageOfDiscovery")
                .attr("d", "M" + x(1600) + " " + y(100) +
                    "L" + x(1600) + " " + y(0) +
                    "L" + x(1770) + " " + y(0) +
                    "L" + x(1770) + " " + y(100));
            focus.select("#discoveryText1")
                .attr("x", x(1685))
                .attr("y", 34)
                .attr("text-anchor", "middle");
            focus.select("#discoveryText2")
                .attr("x", x(1685))
                .attr("y", 54)
                .attr("text-anchor", "middle");
            focus.select("#industrialRevolution")
                .attr("d", "M" + x(1770) + " " + y(100) +
                    "L" + x(1770) + " " + y(0) +
                    "L" + x(1870) + " " + y(0) +
                    "L" + x(1870) + " " + y(100));
            focus.select("#industrialText1")
                .attr("x", x(1820))
                .attr("y", 34)
                .attr("text-anchor", "middle");
            focus.select("#industrialText2")
                .attr("x", x(1820))
                .attr("y", 54)
                .attr("text-anchor", "middle");
            focus.select("#modernEra")
                .attr("d", "M" + x(1870) + " " + y(100) +
                    "L" + x(1870) + " " + y(0) +
                    "L" + x(1950) + " " + y(0) +
                    "L" + x(1950) + " " + y(100));
            focus.select("#modernText1")
                .attr("x", x(1910))
                .attr("y", 34)
                .attr("text-anchor", "middle");
            focus.select("#modernText2")
                .attr("x", x(1910))
                .attr("y", 54)
                .attr("text-anchor", "middle");
            if(selection.map(x2.invert, x2)[1] - selection.map(x2.invert, x2)[0] <= 1400){
                focus.select("#industrialText1")
                    .text("Industrial");
                focus.select("#industrialText2")
                    .text("Revolution");
                focus.select("#modernText1")
                    .text("Modern");
                focus.select("#modernText2")
                    .text("");
            }
            else{
                focus.select("#industrialText1")
                    .text("Indust");
                focus.select("#industrialText2")
                    .text("Rev");
                focus.select("#modernText1")
                .text("Mod");
                focus.select("#modernText2")
                .text("ern");
            }
            //rescale figures
            focus.selectAll(".dot")
                .attr("cx", function (d) { return x(d.Fl); })
                .attr("cy", function (d) { return y(d.Index); });

            //rescale axis
            focus.select(".xAxis").call(xAxis);
        }
    </script>
</body>

</html>